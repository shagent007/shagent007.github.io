(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3b2feaea"],{"37a4":function(t,e,a){"use strict";a.d(e,"a",(function(){return p}));a("96cf");var r=a("1da1"),n=a("d4ec"),o=a("bee2"),i=a("262e"),u=a("2caf"),c=a("9ab4"),s=a("6fc5"),l=a("0613"),d=a("0e9d"),h=function(t){Object(i["a"])(a,t);var e=Object(u["a"])(a);function a(){var t;return Object(n["a"])(this,a),t=e.apply(this,arguments),t.authors=new Array,t.loading=!1,t}return Object(o["a"])(a,[{key:"updateAuthors",value:function(t){this.authors=t}},{key:"updateLoading",value:function(t){this.loading=t}},{key:"loadAuthors",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!this.loading){t.next=2;break}return t.abrupt("return");case 2:return console.log("its working"),t.next=5,d["a"].authors.getAll();case 5:e=t.sent,this.updateAuthors(e),this.updateLoading(!0);case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"updateList",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,d["a"].authors.getAll();case 2:e=t.sent,this.updateAuthors(e);case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"getAuthors",get:function(){return this.authors}}]),a}(s["d"]);Object(c["a"])([s["c"]],h.prototype,"updateAuthors",null),Object(c["a"])([s["c"]],h.prototype,"updateLoading",null),Object(c["a"])([Object(s["a"])({rawError:!0})],h.prototype,"loadAuthors",null),Object(c["a"])([Object(s["a"])({rawError:!0})],h.prototype,"updateList",null),h=Object(c["a"])([Object(s["b"])({store:l["a"],dynamic:!0,name:"author"})],h);var p=Object(s["e"])(h)},"5bd0":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("page-title",{attrs:{heading:"Авторы"}},[a("v-btn",{staticClass:"white--text ma-2",attrs:{color:"indigo"},on:{click:t.addAuthor}},[a("span",{staticClass:" d-none d-sm-block"},[t._v("Добавить нового автора")]),a("v-icon",{staticClass:"d-sm-none"},[t._v("mdi-plus")])],1)],1),a("v-data-table",{staticClass:"elevation-1",attrs:{tile:"",headers:t.headers,items:t.items,"items-per-page":5},scopedSlots:t._u([{key:"item.actions",fn:function(e){var r=e.item;return[a("v-btn",{staticClass:"mr-2",attrs:{outlined:"",small:"",color:"success"},on:{click:function(e){return t.editItem(r.id)}}},[a("v-icon",[t._v("mdi-pencil")])],1),a("v-btn",{attrs:{outlined:"",small:"",color:"error"},on:{click:function(e){return t.deleteItem(r.id)}}},[a("v-icon",[t._v("mdi-delete")])],1)]}}])}),a("add-author-modal",{ref:"addAuthorModal"}),a("confirm-modal",{ref:"confirmModal"})],1)},n=[],o=(a("b0c0"),a("96cf"),a("1da1")),i=a("d4ec"),u=a("bee2"),c=a("262e"),s=a("2caf"),l=a("9ab4"),d=a("2b0e"),h=a("60a3"),p=a("0e9d"),v=a("0074"),m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{attrs:{persistent:"","max-width":"600px"},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v("Добавить нового автора")])]),a("v-card-text",[a("v-text-field",{attrs:{label:"Введите имя",type:"text","persistent-hint":"",required:""},model:{value:t.author.name,callback:function(e){t.$set(t.author,"name",e)},expression:"author.name"}})],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.decline}},[t._v(" Отмена ")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.accept}},[t._v(" Добавить ")])],1)],1)],1)},f=[],b=(a("d3b7"),function(t){Object(c["a"])(a,t);var e=Object(s["a"])(a);function a(){var t;return Object(i["a"])(this,a),t=e.apply(this,arguments),t.author=new v["a"],t.modal=!1,t}return Object(u["a"])(a,[{key:"open",value:function(){var t=this;return this.modal=!0,new Promise((function(e,a){t.resolve=e,t.reject=a}))}},{key:"accept",value:function(){this.resolve(this.author),this.modal=!1,this.author=new v["a"]}},{key:"decline",value:function(){this.resolve(new v["a"]),this.modal=!1,this.author=new v["a"]}}]),a}(d["a"]));b=Object(l["a"])([h["a"]],b);var g=b,j=g,k=a("2877"),w=a("6544"),O=a.n(w),x=a("8336"),y=a("b0af"),A=a("99d9"),R=a("169a"),_=a("2fa4"),C=a("8654"),V=Object(k["a"])(j,m,f,!1,null,null,null),M=V.exports;O()(V,{VBtn:x["a"],VCard:y["a"],VCardActions:A["a"],VCardText:A["b"],VCardTitle:A["c"],VDialog:R["a"],VSpacer:_["a"],VTextField:C["a"]});var L=a("f03b"),I=a("37a4"),$=function(t){Object(c["a"])(a,t);var e=Object(s["a"])(a);function a(){var t;return Object(i["a"])(this,a),t=e.apply(this,arguments),t.headers=[{text:"Имя",value:"name"},{text:"",value:"actions",align:"right",sortable:!1}],t.items=new Array,t}return Object(u["a"])(a,[{key:"addAuthor",value:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.addAuthorModal.open();case 2:if(e=t.sent,!e.name){t.next=14;break}return a=new v["a"],a.name=e.name,a.biography=e.biography,t.next=9,p["a"].authors.add(a);case 9:return r=t.sent,t.next=12,p["a"].authors.getAll();case 12:this.items=t.sent,this.$router.push({name:"author",params:{id:r}});case 14:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"editItem",value:function(t){this.$router.push({name:"author",params:{id:t}})}},{key:"deleteItem",value:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.confirmModal.open();case 2:if(a=t.sent,!a){t.next=8;break}return t.next=6,p["a"].authors.delete(e);case 6:return t.next=8,this.updateList;case 8:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"updateList",value:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,I["a"].updateList();case 2:this.items=I["a"].getAuthors;case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"created",value:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,I["a"].loadAuthors();case 2:this.items=I["a"].getAuthors;case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}]),a}(d["a"]);Object(l["a"])([Object(h["c"])("addAuthorModal")],$.prototype,"addAuthorModal",void 0),Object(l["a"])([Object(h["c"])("confirmModal")],$.prototype,"confirmModal",void 0),$=Object(l["a"])([Object(h["a"])({components:{AddAuthorModal:M,ConfirmModal:L["a"]}})],$);var E=$,T=E,B=a("8fea"),D=a("132d"),J=Object(k["a"])(T,r,n,!1,null,null,null);e["default"]=J.exports;O()(J,{VBtn:x["a"],VDataTable:B["a"],VIcon:D["a"]})}}]);
//# sourceMappingURL=chunk-3b2feaea.6115849c.js.map