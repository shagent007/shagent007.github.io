{"version":3,"sources":["webpack:///./src/store/modules/authorModule.ts","webpack:///./src/pages/authors/Authors.vue?790d","webpack:///./src/pages/authors/AddAuthorModal.vue?cdb0","webpack:///./src/pages/authors/AddAuthorModal.vue","webpack:///./src/pages/authors/AddAuthorModal.vue?311f","webpack:///./src/pages/authors/AddAuthorModal.vue?28ff","webpack:///./src/pages/authors/Authors.vue","webpack:///./src/pages/authors/Authors.vue?566f","webpack:///./src/pages/authors/Authors.vue?ef76"],"names":["AuthorModule","authors","Array","loading","payload","this","console","log","getAll","updateAuthors","updateLoading","rawError","store","dynamic","name","authorModule","render","_vm","_h","$createElement","_c","_self","attrs","staticClass","on","addAuthor","_v","headers","items","scopedSlots","_u","key","fn","ref","item","$event","editItem","id","deleteItem","staticRenderFns","model","value","callback","$$v","modal","expression","author","$set","decline","accept","Promise","resolve","reject","component","VBtn","VCard","VCardActions","VCardText","VCardTitle","VDialog","VSpacer","VTextField","text","align","sortable","addAuthorModal","open","result","biography","api","add","newAuthorId","$router","push","params","confirmModal","delete","updateList","getAuthors","loadAuthors","components","AddAuthorModal","ConfirmModal","VDataTable","VIcon"],"mappings":"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","file":"js/chunk-3b2feaea.6115849c.js","sourcesContent":["import { VuexModule, Module, Mutation, getModule } from 'vuex-module-decorators'\r\nimport store from '@/store'\r\nimport { AuthorDto } from '@/services/models'\r\nimport { Action } from 'vuex-module-decorators'\r\nimport api from '@/services/api'\r\n\r\nexport interface AuthorState {\r\n  authors: Array<AuthorDto>\r\n  loading: boolean\r\n}\r\n\r\n@Module({ store, dynamic: true, name: 'author' })\r\nclass AuthorModule extends VuexModule implements AuthorState {\r\n  authors: Array<AuthorDto> = new Array<AuthorDto>()\r\n  loading = false\r\n\r\n  public get getAuthors() {\r\n    return this.authors\r\n  }\r\n\r\n  @Mutation\r\n  public updateAuthors(payload: Array<AuthorDto>) {\r\n    this.authors = payload\r\n  }\r\n\r\n  @Mutation\r\n  private updateLoading(payload: boolean) {\r\n    this.loading = payload\r\n  }\r\n\r\n  @Action({ rawError: true })\r\n  public async loadAuthors() {\r\n    if (this.loading) return\r\n    console.log('its working')\r\n\r\n    const authors = await api.authors.getAll()\r\n    this.updateAuthors(authors)\r\n    this.updateLoading(true)\r\n  }\r\n\r\n  @Action({ rawError: true })\r\n  public async updateList() {\r\n    const authors = await api.authors.getAll()\r\n    this.updateAuthors(authors)\r\n  }\r\n}\r\n\r\nexport const authorModule = getModule(AuthorModule)\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('page-title',{attrs:{\"heading\":\"Авторы\"}},[_c('v-btn',{staticClass:\"white--text ma-2\",attrs:{\"color\":\"indigo\"},on:{\"click\":_vm.addAuthor}},[_c('span',{staticClass:\" d-none d-sm-block\"},[_vm._v(\"Добавить нового автора\")]),_c('v-icon',{staticClass:\"d-sm-none\"},[_vm._v(\"mdi-plus\")])],1)],1),_c('v-data-table',{staticClass:\"elevation-1\",attrs:{\"tile\":\"\",\"headers\":_vm.headers,\"items\":_vm.items,\"items-per-page\":5},scopedSlots:_vm._u([{key:\"item.actions\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('v-btn',{staticClass:\"mr-2\",attrs:{\"outlined\":\"\",\"small\":\"\",\"color\":\"success\"},on:{\"click\":function($event){return _vm.editItem(item.id)}}},[_c('v-icon',[_vm._v(\"mdi-pencil\")])],1),_c('v-btn',{attrs:{\"outlined\":\"\",\"small\":\"\",\"color\":\"error\"},on:{\"click\":function($event){return _vm.deleteItem(item.id)}}},[_c('v-icon',[_vm._v(\"mdi-delete\")])],1)]}}])}),_c('add-author-modal',{ref:\"addAuthorModal\"}),_c('confirm-modal',{ref:\"confirmModal\"})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-dialog',{attrs:{\"persistent\":\"\",\"max-width\":\"600px\"},model:{value:(_vm.modal),callback:function ($$v) {_vm.modal=$$v},expression:\"modal\"}},[_c('v-card',[_c('v-card-title',[_c('span',{staticClass:\"headline\"},[_vm._v(\"Добавить нового автора\")])]),_c('v-card-text',[_c('v-text-field',{attrs:{\"label\":\"Введите имя\",\"type\":\"text\",\"persistent-hint\":\"\",\"required\":\"\"},model:{value:(_vm.author.name),callback:function ($$v) {_vm.$set(_vm.author, \"name\", $$v)},expression:\"author.name\"}})],1),_c('v-card-actions',[_c('v-spacer'),_c('v-btn',{attrs:{\"color\":\"blue darken-1\",\"text\":\"\"},on:{\"click\":_vm.decline}},[_vm._v(\" Отмена \")]),_c('v-btn',{attrs:{\"color\":\"blue darken-1\",\"text\":\"\"},on:{\"click\":_vm.accept}},[_vm._v(\" Добавить \")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport Vue from 'vue'\r\nimport { Component } from 'vue-property-decorator'\r\nimport { AuthorDto } from '@/services/models.ts'\r\n\r\n@Component\r\nexport default class AddAuthorModal extends Vue {\r\n  resolve!: Function\r\n  reject!: Function\r\n\r\n  author = new AuthorDto()\r\n\r\n  modal = false\r\n  public open(): Promise<AuthorDto> {\r\n    this.modal = true\r\n    return new Promise((resolve, reject) => {\r\n      this.resolve = resolve\r\n      this.reject = reject\r\n    })\r\n  }\r\n\r\n  accept() {\r\n    this.resolve(this.author)\r\n    this.modal = false\r\n    this.author = new AuthorDto()\r\n  }\r\n\r\n  decline() {\r\n    this.resolve(new AuthorDto())\r\n    this.modal = false\r\n    this.author = new AuthorDto()\r\n  }\r\n}\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AddAuthorModal.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AddAuthorModal.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./AddAuthorModal.vue?vue&type=template&id=bedbbd56&\"\nimport script from \"./AddAuthorModal.vue?vue&type=script&lang=ts&\"\nexport * from \"./AddAuthorModal.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardActions } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VCardTitle } from 'vuetify/lib/components/VCard';\nimport { VDialog } from 'vuetify/lib/components/VDialog';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\ninstallComponents(component, {VBtn,VCard,VCardActions,VCardText,VCardTitle,VDialog,VSpacer,VTextField})\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport Vue from 'vue'\r\nimport { Component, Ref } from 'vue-property-decorator'\r\nimport api from '@/services/api.ts'\r\nimport { AuthorDto } from '@/services/models.ts'\r\n\r\nimport AddAuthorModal from '@/pages/authors/AddAuthorModal.vue'\r\nimport ConfirmModal from '@/pages/component/ConfirmModal.vue'\r\nimport { authorModule } from '@/store/modules/authorModule'\r\n\r\n@Component({\r\n  components: {\r\n    AddAuthorModal,\r\n    ConfirmModal\r\n  }\r\n})\r\nexport default class Authors extends Vue {\r\n  @Ref('addAuthorModal') readonly addAuthorModal!: AddAuthorModal\r\n  @Ref('confirmModal') readonly confirmModal!: ConfirmModal\r\n\r\n  headers = [\r\n    { text: 'Имя', value: 'name' },\r\n    { text: '', value: 'actions', align: 'right', sortable: false }\r\n  ]\r\n\r\n  items: Array<AuthorDto> = new Array<AuthorDto>()\r\n\r\n  async addAuthor() {\r\n    const result = await this.addAuthorModal.open()\r\n    if (result.name) {\r\n      const author: AuthorDto = new AuthorDto()\r\n      author.name = result.name\r\n      author.biography = result.biography\r\n      const newAuthorId = await api.authors.add(author)\r\n      this.items = await api.authors.getAll()\r\n\r\n      this.$router.push({\r\n        name: 'author',\r\n        params: { id: newAuthorId }\r\n      })\r\n    }\r\n  }\r\n\r\n  editItem(id: string) {\r\n    this.$router.push({\r\n      name: 'author',\r\n      params: { id }\r\n    })\r\n  }\r\n\r\n  async deleteItem(id: number) {\r\n    const result = await this.confirmModal.open()\r\n\r\n    if (result) {\r\n      await api.authors.delete(id)\r\n      await this.updateList\r\n    }\r\n  }\r\n\r\n  async updateList() {\r\n    await authorModule.updateList()\r\n    this.items = authorModule.getAuthors\r\n  }\r\n\r\n  async created() {\r\n    await authorModule.loadAuthors()\r\n    this.items = authorModule.getAuthors\r\n  }\r\n}\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Authors.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Authors.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Authors.vue?vue&type=template&id=ba97ecf4&\"\nimport script from \"./Authors.vue?vue&type=script&lang=ts&\"\nexport * from \"./Authors.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VDataTable } from 'vuetify/lib/components/VDataTable';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\ninstallComponents(component, {VBtn,VDataTable,VIcon})\n"],"sourceRoot":""}